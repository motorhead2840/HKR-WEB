<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HKR Corp | The Architecture of Tomorrow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        
        :root {
            --bg-dark: #000000;
            --accent-cyan: #00ffff;
            --accent-magenta: #ff00ff;
        }

        body {
            margin: 0;
            background: var(--bg-dark);
            font-family: 'Inter', sans-serif;
            color: white;
            overflow-x: hidden;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 1;
            pointer-events: auto;
        }

        .page-content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: none; 
            flex-direction: column;
            padding: 120px 10% 80px;
            pointer-events: none;
        }

        .page-content.active {
            display: flex;
        }

        .interactive {
            pointer-events: auto;
        }

        .glass-nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 5%;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-text {
            font-size: clamp(3rem, 12vw, 9rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: -0.05em;
            line-height: 0.85;
            mix-blend-mode: exclusion;
        }

        .sub-heading {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.6em;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            padding: 2.5rem;
            border-radius: 2px;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card:hover {
            border-color: var(--accent-cyan);
            background: rgba(255, 255, 255, 0.07);
            transform: translateY(-5px);
        }

        .nav-link {
            position: relative;
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: -5px;
            left: 0;
            background-color: var(--accent-cyan);
            transition: width 0.3s;
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        /* Full Screen Modal with 20px Margin */
        #solution-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 200;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(15px);
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        #solution-modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            /* Full screen with 20px margin */
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            width: auto;
            height: auto;
            
            background: #050505;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
            padding: 0;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            transform: scale(0.98);
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
        }

        #solution-modal.active .modal-content {
            transform: scale(1);
        }

        /* Modal Internal Layout */
        .modal-hero {
            height: 50vh;
            width: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: flex-end;
            padding: 4rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .modal-hero::after {
            content: '';
            position: absolute;
            top:0; left:0; width:100%; height:100%;
            background: linear-gradient(to top, #050505, transparent);
        }

        .modal-body-content {
            padding: 4rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease 0.2s;
        }

        #solution-modal.active .modal-body-content {
            opacity: 1;
            transform: translateY(0);
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 4rem;
        }

        .detail-img {
            width: 100%;
            height: 300px;
            background: #111;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }
        
        /* Placeholder for S3 images */
        .s3-placeholder {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.5;
            transition: opacity 0.3s;
        }
        .detail-img:hover .s3-placeholder {
            opacity: 0.8;
        }

        .btn-primary {
            background: white;
            color: black;
            padding: 1rem 2.5rem;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            background: var(--accent-cyan);
            letter-spacing: 0.4em;
        }
        
        /* Updated Close Button Position */
        .close-btn {
            position: absolute;
            top: 2rem;
            left: 4rem; /* Aligned left to match content padding */
            z-index: 50;
            cursor: pointer;
            padding: 10px 20px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            transition: all 0.3s;
            color: white;
        }
        .close-btn:hover {
            background: white;
            color: black;
            border-color: white;
        }

        .footer {
            padding: 4rem 10%;
            background: #000;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 20;
            position: relative;
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #222; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-cyan); }
    </style>
</head>
<body>

    <nav class="glass-nav">
        <div class="text-xl font-black tracking-tighter interactive cursor-pointer" onclick="showPage('home')">HKR CORP.</div>
        <div class="hidden md:flex gap-10 text-[10px] font-bold tracking-[0.3em] uppercase interactive">
            <span class="nav-link active" data-page="home" onclick="showPage('home')">Home</span>
            <span class="nav-link" data-page="solutions" onclick="showPage('solutions')">Solutions</span>
            <span class="nav-link" data-page="tech" onclick="showPage('tech')">Technology</span>
            <span class="nav-link" data-page="about" onclick="showPage('about')">About</span>
            <button class="bg-white text-black px-4 py-2 hover:bg-cyan-400 transition ml-4" onclick="showPage('contact')">Connect</button>
        </div>
    </nav>

    <div id="canvas-container"></div>

    <!-- POP-UP MODAL (20px Margin, Full Screen) -->
    <div id="solution-modal" onclick="closeModal(event)">
        <div class="modal-content interactive" onclick="event.stopPropagation()">
            <button class="close-btn" onclick="closeModal()">✕ Close</button>
            <div id="modal-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- HOME PAGE -->
    <div id="page-home" class="page-content active">
        <div class="max-w-4xl min-h-[70vh] flex flex-col justify-center">
            <p class="sub-heading">Global Innovation Matrix</p>
            <h1 class="glass-text">CHANGE THE<br>WORLD</h1>
            <p class="mt-8 text-gray-400 max-w-lg leading-relaxed interactive text-sm">
                HKR Corp architecting high-dimensional kinetic resources for the global digital economy. We bridge the gap between theoretical computing and physical infrastructure.
            </p>
            <div class="mt-10 flex flex-wrap gap-6 interactive">
                <button onclick="scrollToFeatured()" class="btn-primary">View Solutions</button>
                <button onclick="showPage('tech')" class="text-[10px] tracking-[0.3em] uppercase flex items-center gap-2 group hover:text-cyan-400 transition">
                    Technical Core <span class="group-hover:translate-x-2 transition">→</span>
                </button>
            </div>
        </div>

        <div id="featured-work" class="mt-32 max-w-7xl w-full mx-auto">
            <h3 class="text-xs tracking-[0.5em] font-bold text-cyan-400 uppercase mb-12 border-b border-white/10 pb-4">Featured Solutions</h3>
            <div class="grid md:grid-cols-2 gap-8 interactive">
                <div class="card cursor-pointer" onclick="openSolution('dreamweaver')">
                    <div>
                        <div class="text-magenta-400 text-[10px] mb-4 tracking-[0.3em]" style="color:#ff00ff">LUXURY APPAREL</div>
                        <h3 class="text-xl font-bold mb-3">Dreamweaver</h3>
                        <p class="text-gray-500 text-xs leading-relaxed">Custom-tailored apparel that emphasizes a "sexy" state of mind with high-quality material integrity.</p>
                    </div>
                </div>
                <div class="card cursor-pointer" onclick="openSolution('sagemaker')">
                    <div>
                        <div class="text-cyan-400 text-[10px] mb-4 tracking-[0.3em]">ED-TECH</div>
                        <h3 class="text-xl font-bold mb-3">Sagemaker</h3>
                        <p class="text-gray-500 text-xs leading-relaxed">Cloud-native unified learning ecosystem available across all scientific fields and platforms.</p>
                    </div>
                </div>
                <div class="card cursor-pointer" onclick="openSolution('bornfree')">
                    <div>
                        <div class="text-gray-400 text-[10px] mb-4 tracking-[0.3em]">TOURISM</div>
                        <h3 class="text-xl font-bold mb-3">BornFree</h3>
                        <p class="text-gray-500 text-xs leading-relaxed">Streamlining tourism logistics as a comprehensive travel assistant to ensure enjoyable journeys.</p>
                    </div>
                </div>
                <div class="card cursor-pointer" onclick="openSolution('cyphermonk')">
                    <div>
                        <div class="text-cyan-400 text-[10px] mb-4 tracking-[0.3em]">BLOCKCHAIN</div>
                        <h3 class="text-xl font-bold mb-3">CypherMonk</h3>
                        <p class="text-gray-500 text-xs leading-relaxed">Post-Quantum Cryptography and BTC cold storage via Icarus Cards for secure communications.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SOLUTIONS PAGE -->
    <div id="page-solutions" class="page-content">
        <div class="max-w-7xl w-full mx-auto">
            <div class="max-w-3xl mb-16">
                <p class="sub-heading">Tactical Portfolios</p>
                <h2 class="text-5xl font-black mb-6 tracking-tighter uppercase">Solutions</h2>
                <p class="text-gray-400 leading-relaxed interactive text-lg">
                    At the core of our company is a drive to solve complex problems through specialized expertise. Our portfolio showcases a diverse range of projects—from luxury fashion to cutting-edge cryptography.
                </p>
            </div>
            
            <h3 class="text-xs tracking-[0.5em] font-bold text-cyan-400 uppercase mb-8 border-b border-white/10 pb-4">Our Project Portfolio</h3>

            <div class="grid md:grid-cols-2 gap-8 interactive">
                <!-- Dreamweaver -->
                <div class="card cursor-pointer" onclick="openSolution('dreamweaver')">
                    <div>
                        <div class="text-magenta-400 text-[10px] mb-4 tracking-[0.3em]" style="color:#ff00ff">LUXURY APPAREL</div>
                        <h3 class="text-2xl font-bold mb-4">Dreamweaver</h3>
                        <p class="text-gray-400 text-sm leading-relaxed mb-6">Emphasizing the psychology of confidence through custom-tailored apparel and material integrity.</p>
                    </div>
                    <div class="text-[10px] text-cyan-400 uppercase tracking-widest">Click to Expand Portfolio →</div>
                </div>

                <!-- Sagemaker -->
                <div class="card cursor-pointer" onclick="openSolution('sagemaker')">
                    <div>
                        <div class="text-cyan-400 text-[10px] mb-4 tracking-[0.3em]">ED-TECH</div>
                        <h3 class="text-2xl font-bold mb-4">Sagemaker</h3>
                        <p class="text-gray-400 text-sm leading-relaxed mb-6">A unified learning ecosystem available across all platforms for curated scientific education.</p>
                    </div>
                    <div class="text-[10px] text-cyan-400 uppercase tracking-widest">Click to Expand Portfolio →</div>
                </div>

                <!-- BornFree -->
                <div class="card cursor-pointer" onclick="openSolution('bornfree')">
                    <div>
                        <div class="text-gray-400 text-[10px] mb-4 tracking-[0.3em]">TOURISM</div>
                        <h3 class="text-2xl font-bold mb-4">BornFree</h3>
                        <p class="text-gray-400 text-sm leading-relaxed mb-6">Intelligent tourism assistant streamlining logistics for seamless global travel experiences.</p>
                    </div>
                    <div class="text-[10px] text-cyan-400 uppercase tracking-widest">Click to Expand Portfolio →</div>
                </div>

                <!-- CypherMonk -->
                <div class="card cursor-pointer" onclick="openSolution('cyphermonk')">
                    <div>
                        <div class="text-cyan-400 text-[10px] mb-4 tracking-[0.3em]">BLOCKCHAIN</div>
                        <h3 class="text-2xl font-bold mb-4">CypherMonk</h3>
                        <p class="text-gray-400 text-sm leading-relaxed mb-6">Advanced cryptography R&D, PQC protocols, and dedicated Bitcoin cold storage hardware.</p>
                    </div>
                    <div class="text-[10px] text-cyan-400 uppercase tracking-widest">Click to Expand Portfolio →</div>
                </div>
            </div>
        </div>
    </div>

    <!-- TECHNOLOGY PAGE -->
    <div id="page-tech" class="page-content">
        <div class="max-w-5xl w-full mx-auto">
            <p class="sub-heading">Hardware & Logic</p>
            <h2 class="text-5xl font-black mb-8 tracking-tighter uppercase">The Technology</h2>
            <div class="grid md:grid-cols-2 gap-12 items-center interactive">
                <div class="space-y-6">
                    <p class="text-gray-400 leading-relaxed">
                        Our proprietary <strong>HKR-Infinity Engine</strong> utilizes non-Euclidean data structures.
                    </p>
                    <div class="border-l-2 border-cyan-400 pl-6 py-4">
                        <h4 class="text-xs tracking-[0.3em] font-bold text-cyan-400 uppercase mb-2">Core Processor</h4>
                        <p class="text-2xl font-black italic">HKR-Titan 9</p>
                    </div>
                </div>
                <div class="bg-white/5 p-10 backdrop-blur-sm border border-white/10">
                    <h4 class="text-xs tracking-[0.3em] font-bold uppercase mb-6">System Status</h4>
                    <div class="space-y-4">
                        <div class="flex justify-between text-[10px] uppercase tracking-widest">
                            <span>Uptime</span>
                            <span class="text-cyan-400">99.999%</span>
                        </div>
                        <div class="w-full bg-white/10 h-1"><div class="bg-cyan-400 h-full w-[99%]"></div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ABOUT PAGE -->
    <div id="page-about" class="page-content">
        <div class="max-w-4xl w-full mx-auto">
            <p class="sub-heading">Our Legacy</p>
            <h2 class="text-5xl font-black mb-10 tracking-tighter uppercase">Founded on Vision</h2>
            <p class="text-xl text-gray-300 font-light leading-relaxed interactive">
                HKR Corp was established in 2012 by a collective of computational physicists and industrial designers.
            </p>
        </div>
    </div>

    <!-- CONTACT PAGE -->
    <div id="page-contact" class="page-content items-center text-center justify-center">
        <div class="max-w-xl w-full interactive mx-auto">
            <p class="sub-heading">Secure Connection</p>
            <h2 class="text-5xl font-black mb-8 tracking-tighter uppercase">Get in Touch</h2>
            <form class="space-y-6">
                <input type="text" placeholder="FULL NAME / ENTITY" class="w-full bg-transparent border-b border-white/20 py-4 focus:outline-none focus:border-cyan-400 transition text-xs tracking-widest uppercase">
                <button type="submit" class="btn-primary w-full mt-6">Initialize Communication</button>
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="flex flex-col md:flex-row justify-between gap-10 max-w-7xl mx-auto">
            <div>
                <div class="text-2xl font-black tracking-tighter mb-4">HKR CORP.</div>
                <p class="text-gray-600 text-[10px] uppercase tracking-widest">© 2026 HKR Global Holdings. <br>System Version 4.0.12</p>
            </div>
        </div>
    </footer>

    <script>
        let scene, camera, renderer, masterGroup, clock;
        let isMouseDown = false;
        let mouseX = 0, mouseY = 0;
        let targetRotationX = 0.5, targetRotationY = 0.5;
        let currentActivePage = 'home';

        const solutionData = {
            dreamweaver: {
                title: "Dreamweaver",
                category: "Luxury Women’s Apparel",
                sub: "More than just fashion, Dreamweaver is about the psychology of confidence.",
                detail: "We specialize in custom-tailored apparel that emphasizes a 'sexy' state of mind without sacrificing ease of wear. Every garment is a testament to high-quality craftsmanship and material integrity. Our approach integrates supply-chain precision with aesthetic fluidity to create pieces that are both timeless and structurally innovative.",
                // To replace with S3 images, change the src attribute below
                heroImg: "https://via.placeholder.com/1920x800/111/444?text=DREAMWEAVER_HERO_S3",
                images: [
                    "https://via.placeholder.com/600x400/222/555?text=FABRIC_DETAIL_S3",
                    "https://via.placeholder.com/600x400/222/555?text=DESIGN_PROCESS_S3",
                    "https://via.placeholder.com/600x400/222/555?text=RUNWAY_SHOT_S3"
                ]
            },
            sagemaker: {
                title: "Sagemaker",
                category: "Unified Learning Ecosystem",
                sub: "Education should be accessible everywhere.",
                detail: "Sagemaker is a cloud-native application available across web, mobile, and tablet platforms. It delivers expertly curated content across all scientific fields, intelligently adapting to students of any age or expertise level through recursive feedback loops and AI-driven curriculum adjustment.",
                heroImg: "https://via.placeholder.com/1920x800/111/0ff?text=SAGEMAKER_HERO_S3",
                images: [
                    "https://via.placeholder.com/600x400/222/555?text=DASHBOARD_UI_S3",
                    "https://via.placeholder.com/600x400/222/555?text=MOBILE_APP_S3",
                    "https://via.placeholder.com/600x400/222/555?text=AI_NODE_VISUAL_S3"
                ]
            },
            bornfree: {
                title: "BornFree",
                category: "Intelligent Tourism Logistics",
                sub: "Travel is about freedom, and BornFree removes the friction.",
                detail: "This cloud-based application serves as a comprehensive travel assistant, streamlining tourism logistics to ensure that the journey is as enjoyable as the destination. We handle everything from global route optimization to real-time itinerary syncing using predictive traffic models.",
                heroImg: "https://via.placeholder.com/1920x800/111/888?text=BORNFREE_HERO_S3",
                images: [
                    "https://via.placeholder.com/600x400/222/555?text=MAP_INTERFACE_S3",
                    "https://via.placeholder.com/600x400/222/555?text=TRAVEL_LOGISTICS_S3",
                    "https://via.placeholder.com/600x400/222/555?text=USER_JOURNEY_S3"
                ]
            },
            cyphermonk: {
                title: "CypherMonk",
                category: "Advanced Cryptography & Blockchain",
                sub: "The frontier of digital security.",
                detail: "CypherMonk leads R&D in Post-Quantum Cryptography (PQC) and secure communication protocols. We develop blockchain applications for fintech and beyond. Our dedicated storefront features Icarus Cards (BTC cold storage) and professional mining hardware.",
                heroImg: "https://via.placeholder.com/1920x800/111/0ff?text=CYPHERMONK_HERO_S3",
                images: [
                    "https://via.placeholder.com/600x400/222/555?text=HARDWARE_WALLET_S3",
                    "https://via.placeholder.com/600x400/222/555?text=ENCRYPTION_NODE_S3",
                    "https://via.placeholder.com/600x400/222/555?text=MINING_RIG_S3"
                ]
            }
        };

        function openSolution(id) {
            const data = solutionData[id];
            const modalBody = document.getElementById('modal-body');
            
            // Build image grid HTML
            const imagesHtml = data.images.map(img => `
                <div class="detail-img">
                    <img src="${img}" alt="Project Detail" class="s3-placeholder">
                </div>
            `).join('');

            modalBody.innerHTML = `
                <div class="modal-hero" style="background-image: url('${data.heroImg}');">
                    <div class="relative z-10 max-w-4xl">
                        <p class="text-cyan-400 text-xs tracking-[0.5em] uppercase mb-4">${data.category}</p>
                        <h2 class="text-5xl lg:text-8xl font-black tracking-tighter uppercase text-white mb-6" style="text-shadow: 0 10px 30px rgba(0,0,0,0.5);">${data.title}</h2>
                    </div>
                </div>
                
                <div class="modal-body-content">
                    <div class="grid lg:grid-cols-12 gap-16">
                        <div class="lg:col-span-4">
                            <p class="text-2xl font-light text-white leading-relaxed border-l-2 border-cyan-400 pl-6">${data.sub}</p>
                            <div class="mt-12 space-y-4">
                                <div class="flex items-center gap-4 text-xs text-gray-500 uppercase tracking-widest">
                                    <div class="w-2 h-2 bg-cyan-400 rounded-full"></div>
                                    <span>Status: Active</span>
                                </div>
                                <div class="flex items-center gap-4 text-xs text-gray-500 uppercase tracking-widest">
                                    <div class="w-2 h-2 bg-gray-600 rounded-full"></div>
                                    <span>Version: 2.4.0</span>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-8">
                            <p class="text-gray-400 leading-loose text-lg">${data.detail}</p>
                            
                            <div class="image-grid">
                                ${imagesHtml}
                            </div>

                            <div class="mt-24 pt-10 border-t border-white/10 text-center pb-8">
                                <button class="btn-primary" onclick="closeModal()">✕ Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('solution-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('solution-modal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showPage(pageId) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.toggle('active', link.getAttribute('data-page') === pageId);
            });
            document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            currentActivePage = pageId;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToFeatured() {
            document.getElementById('featured-work').scrollIntoView({ behavior: 'smooth' });
        }

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 6;
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            masterGroup = new THREE.Group();
            scene.add(masterGroup);
            const layerCount = 6;
            const baseSize = 2.5;

            for (let i = 0; i < layerCount; i++) {
                const scale = Math.pow(0.75, i);
                const size = baseSize * scale;
                const geometry = new THREE.BoxGeometry(size, size, size);
                const material = new THREE.MeshPhysicalMaterial({
                    color: 0xffffff, metalness: 0.5, roughness: 0.1, transmission: 0.9,
                    transparent: true, opacity: i === 0 ? 0.3 : 0.3 / (i + 1), reflectivity: 1.0, side: THREE.DoubleSide,
                    thickness: 0.5, ior: 1.45,
                });
                const mesh = new THREE.Mesh(geometry, material);
                const edges = new THREE.EdgesGeometry(geometry);
                const lineMat = new THREE.LineBasicMaterial({ color: 0x333333, transparent: true, opacity: 0.5 / (i + 0.5) });
                const line = new THREE.LineSegments(edges, lineMat);
                mesh.add(line);
                masterGroup.add(mesh);
                mesh.rotation.x = i * 0.1;
                mesh.rotation.y = i * 0.1;
            }

            const light1 = new THREE.PointLight(0x00ffff, 1.5, 20);
            light1.position.set(5, 5, 5);
            scene.add(light1);
            const light2 = new THREE.PointLight(0xff00ff, 1.5, 20);
            light2.position.set(-5, -5, 5);
            scene.add(light2);

            clock = new THREE.Clock();
            window.addEventListener('resize', onWindowResize);
            document.addEventListener('keydown', (e) => { if(e.key === "Escape") closeModal(); });
            animate();
        }

        function onMouseMove(event) {
            if (isMouseDown) {
                targetRotationY += (event.clientX - mouseX) * 0.01;
                targetRotationX += (event.clientY - mouseY) * 0.01;
                mouseX = event.clientX;
                mouseY = event.clientY;
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            masterGroup.rotation.y += (targetRotationY - masterGroup.rotation.y) * 0.05;
            masterGroup.rotation.x += (targetRotationX - masterGroup.rotation.x) * 0.05;
            const time = clock.getElapsedTime();
            
            let targetX = 0, targetY = 0, targetScale = 1;
            if (currentActivePage === 'home') {
                targetY = window.scrollY * 0.003;
            } else if (currentActivePage === 'solutions') {
                targetX = 2.8; targetY = 0.5; targetScale = 0.7;
            }
            
            masterGroup.position.x += (targetX - masterGroup.position.x) * 0.05;
            masterGroup.position.y += (targetY - masterGroup.position.y) * 0.05;
            const s = masterGroup.scale.x + (targetScale - masterGroup.scale.x) * 0.05;
            masterGroup.scale.set(s, s, s);

            masterGroup.children.forEach((child, index) => {
                child.rotation.z = Math.sin(time * 0.2 + index) * 0.1;
            });

            if (!isMouseDown) { targetRotationY += 0.003; targetRotationX += 0.0015; }
            renderer.render(scene, camera);
        }

        window.onload = init;
    </script>
</body>
</html>
